<!DOCTYPE HTML>

<head>
	<title>Books</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
	
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
</head>

<body>
	<div id="create-edit" style="display:none">
		<h2>create-edit</h2>
		<table>
			<tr>
				<td>ISBN</td>
				<td><input type="text" name="ISBN"></td>
			</tr>
			<tr>
				<td>title</td>
				<td><input type="text" name="title"></td>
			</tr>
			<tr>
				<td>author</td>
				<td><input type="text" name="author"></td>
			</tr>
			<tr>
				<td>price</td>
				<td><input type="currency" name="price"></td>
				<td></td><td><button id="create-edit-button">go</button></td>
			</tr>
		</table>
	</div>
	<div id="display">
		<h2>Books</h2>
		<table id="bookTable" class="table">
			<tr>
				<th>ISBN</th><th>title</th><th>author</th><th>price</th><th></th><th></th>
			</tr>
			<tr id="123">
				<td>123</td>
				<td>cooking for us</td>
				<td>jamie oliver</td>
				<td>333</td>
				<td><button onclick="showUpdate(this)">Update</button></td>
				<td><button onclick="doDelete(this)">Delete</button><td>
			</tr>
		</table>
		
	</div>

	<script>
		function populateTable(){
		// Ajax call to surver to getAll books
		//	book={
		//		ISBN:1234,
		//		title:"Harry Potter",
		//		author:"JK",
		//		price:2300
		//	}
			$.ajax({
				url:'http://127.0.0.1:5000/books',
				method:'GET',
				datatype:'JSON',
				success:function(results){
					for (book of results){
						addBookToTable(book)
					}
				},
				error:function (xhr,status,error){
					console.log("error "+error +" code:"+status)
				}
			})
		}
		function addBookToTable(book){
			//console.log("working right now")
			tableElem = document.getElementById("bookTable")
			rowElem = tableElem.insertRow(-1)
			rowElem.setAttribute("id",book.ISBN)
			cell1 = rowElem.insertCell(0)
			cell1.innerHTML = book.ISBN
			cell2 = rowElem.insertCell(1)
			cell2.innerHTML = book.title
			cell3 = rowElem.insertCell(2)
			cell3.innerHTML = book.author
			cell4 = rowElem.insertCell(3)
			cell4.innerHTML = book.price
			cell5 = rowElem.insertCell(4)
			cell5.innerHTML = '<button onclick="showUpdate(this)">Update</button>'
			cell6 = rowElem.insertCell(5)
			cell6.innerHTML = '<button onclick="doDelete(this)">delete</button>'
			
		}
		populateTable()

	
	</script>	

</body>	
</html>
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	